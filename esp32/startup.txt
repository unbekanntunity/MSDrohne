from drohnev2.wifi import *

networks = [{
    "name": "KHOA",
    "password": "Khoa19610121"
    }]

nic = activate_nic()
scanned_networks = scan(nic)

names = [network[0] for network in scanned_networks]

connected = False

for network in networks:
    if network['name'] in names:
        index = names.index(network['name'])
        result = connect(nic, network['name'], network['password'])
        if result:
            print(f'connected to {network["name"]}')
            connected = True
            break

if connected:
    server = Wlan_Server(nic)
    result = server.create_server()
    if result:
        server.server_loop()



