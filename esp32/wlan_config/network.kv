#:kivy 2.0.0
#:import get_color_from_hex kivy.utils.get_color_from_hex

<NetworkArea>
    network_card: network_card
    name_field: name_field
    pass_field: pass_field

    canvas.before:
        Color:
            rgba: .5, .5, .5, .6
        Rectangle:
            pos: (self.x, self.y)
            size: (self.width, self.height)
    MDCard:
        id: network_card
        size_hint: (.5, .5)
        style: 'outlined'
        line_color: (0.2, 0.5, 0.2, 0.8)
        BoxLayout:
            padding: 30
            spacing: 30
            orientation: 'vertical'
            MDLabel:
                adaptive_height: True
                halign: 'center'
                text: root.text
            BoxLayout:
                orientation: 'vertical'
                spacing: 10
                MDTextField:
                    id: name_field
                    mode: "rectangle"
                    required: True
                    hint_text: app.bind_text(self, 'Name')
                    helper_text_mode: 'on_error'
                MDTextField:
                    id: pass_field
                    mode: "rectangle"
                    required: True
                    hint_text: app.bind_text(self, 'Password')
                    helper_text_mode: 'on_error'
            AnchorLayout:
                size_hint_y: .5
                BoxLayout:
                    spacing: 10
                    MDRectangleFlatButton:
                        text: app.bind_text(self, 'Discard')
                        text_color: 0, 0, 1, 1
                        line_color: 1, .2, .7, 1
                        theme_icon_color: "Custom"
                        on_release: root.on_discard(root)
                    MDRectangleFlatButton:
                        text: app.bind_text(self, 'Save')
                        text_color: 0, 0, 1, 1
                        line_color: .2, 1, .7, 1
                        theme_icon_color: "Custom"
                        on_release: root.on_save(root)

<CustomSnackbar>
    MDIconButton:
        pos_hint: {'center_y': .5}
        icon: root.icon

    MDLabel:
        id: text_bar
        size_hint_y: None
        height: self.texture_size[1]
        text: app.bind_text(self, root.text)
        font_size: root.font_size
        theme_text_color: 'Custom'
        text_color: get_color_from_hex('ffffff')
        shorten: True
        shorten_from: 'right'
        pos_hint: {'center_y': .5}

<NetworkListItem>:
    text: self.network_name
    secondary_text: self.network_password

    on_size:
        self.ids._right_container.width = right_container.width
        self.ids._right_container.x = right_container.width

        self.ids._left_container.height = left_container.height

    LeftContainer:
        id: left_container
        spacing: -20
        orientation: 'vertical'
        adaptive_height: True

        MDIconButton:
            icon: 'arrow-up'
            on_release: root.on_arrow_up(root)
        MDIconButton:
            icon: 'arrow-down'
            on_release: root.on_arrow_down(root)

    RightContainer:
        id: right_container
        adaptive_width: True

        MDIconButton:
            icon: 'pencil-outline'
            on_release: root.on_edit(root)

        MDIconButton:
            icon: 'delete-outline'
            on_release: root.on_delete(root)

<LanguageListItem>
    IconLeftWidget:
        icon: root.left_icon

<NetworkRoot>:
    AnchorLayout:
        padding: 10
        anchor_x: 'left'
        anchor_y: 'top'
        LanguageDropDown:
            id: language_drop_down
            size_hint: None, None
            size: caller_btn.width + 40, caller_btn.height
            canvas.before:
                Color:
                    rgba: .2, .1, 1, 1
                Line:
                    width: .5
                    rectangle: self.x,self.y,self.width,self.height
            Image:
                id: caller_btn
                source: f'./data/res/{app.configuration.config_dict["current_language"]}_flag.png'
                size: 20, 20
            MDLabel:
                id: caller_label
                text: app.configuration.config_dict['current_language']

    AnchorLayout:
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: .8
            padding: 30
            spacing: 20
            BoxLayout:
                size_hint_y: .1
                spacing: 20
                MDLabel:
                    halign: "left"
                    font_size: 20
                    text: app.bind_text(self, 'Network configuration')
                MDFillRoundFlatIconButton:
                    icon: "plus"
                    text: app.bind_text(self, 'Add')
                    on_release: root.add_network()
                MDFillRoundFlatIconButton:
                    icon: "delete"
                    text: app.bind_text(self, 'Clear')
                    on_release: root.clear_networks()
            MDCard:
                style: 'outlined'
                line_color: (0.2, 0.2, 0.2, 0.8)
                ScrollView:
                    MDList:
                        id: network_list
            BoxLayout:
                size_hint_y: .1
                spacing: 20
                MDRectangleFlatButton:
                    text: app.bind_text(self, 'Restore')
                    theme_text_color: "Custom"
                    text_color: 0, 0, 1, 1
                    line_color: 1, .2, .7, 1
                    theme_icon_color: "Custom"
                    on_release: root.restore_networks()
                MDRectangleFlatButton:
                    text: app.bind_text(self, 'Save')
                    theme_text_color: "Custom"
                    text_color: 0, 0, 1, 1
                    line_color: .2, 1, .7, 1
                    theme_icon_color: "Custom"
                    on_release: root.save_networks()
        NetworkArea:
            id: add_network_area
            text: app.bind_text(self, 'Add new network')
        NetworkArea:
            id: edit_network_area
            text: app.bind_text(self, 'Edit network')
