#:kivy 2.0.0

<RoundedButton>:
    btn_color_not_pressed: [.5, .5, .5, 1]
    btn_color_pressed: [.25, .25, .25, 1]

    background_color: (0,0,0,0)
	background_normal: ''
	canvas.before:
		Color:
            rgba: self.btn_color_not_pressed if self.state=='normal' else self.btn_color_pressed
		RoundedRectangle:
			size: self.size
			pos: self.pos
			radius: [20]


<StartScreen>:
    name: 'start'
    BoxLayout:
        orientation: 'vertical'
        padding: 50

        Label:
            text: 'Simple DCA'
            font_size: '80'

        BoxLayout:
            orientation: 'vertical'
            spacing: 40
            padding: root.width / 4, 20, root.width / 4, 20
            RoundedButton:
                text: 'Find Device'
                on_release: app.root.ids.sm.current = 'connection'
            RoundedButton:
                text: "Goodbye World!"
                on_release: print("Bye")

<ConnectionScreen>:
    name: 'connection'
    status: status_label
    wlan: wlan_grid
    AnchorLayout:
        padding: root.width / 5
        Label:
            id: status_label
        GridLayout:
            id: wlan_grid
            cols: 2
            height: 0
            Label:
                text: 'Name'
            TextInput:
                id: name_field
                multiline: False
            Label:
                text: 'Passwort'
            TextInput:
                id: password_field
                multiline: False
            Button:
                text: 'Submit'
                on_release: root.send_data(root.ids.name_field.text, root.ids.password_field.text)

#: import Joystick customwidgets.joystick.joystick

<ControlScreen>:
    center_area: center_a
    name: 'control'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            spacing: 30
            size_hint_y: None
            height: root.height / 6
            Button:
                text: 'back'
            Label:
                text: 'Ready for take off'
            Button:
                text: 'menu'
        BoxLayout:
            id: center_a
            Label:
                text: 'CONTROL'
        BoxLayout:
            size_hint_y: None
            height: root.height / 6
            Label:
                text: f'H: {root.altitude} \nS: {root.speed}'
            Label:
                text: f'Lo: {root.latitude} \nLa: {root.longitude}'
            Label:
                text: f'{root.battery}%'
            Label:
                text: 'strong'


<DroneRoot>:
    MyScreenManager:
        id: sm
        StartScreen
        ConnectionScreen
        ControlScreen