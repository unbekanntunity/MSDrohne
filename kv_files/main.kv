#:kivy 2.0.0

<RoundedButton@Button>:
    background_color: (0,0,0,0)
	background_normal: ''
    color: app.configuration.config_dict['app']['font_color']
	canvas.before:
		Color:
            rgba: app.configuration.config_dict['app']['btn_color_not_pressed'] if self.state=='normal' else app.configuration.config_dict['app']['btn_color_pressed']
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [20]

<StartScreen>:
    name: 'start'
    BoxLayout:
        orientation: 'vertical'
        padding: 50

        Label:
            text: 'Simple DCA'
            font_size: '80'
            color: app.configuration.config_dict['app']['font_color']
        BoxLayout:
            orientation: 'vertical'
            spacing: 40
            padding: root.width / 4, 20, root.width / 4, 20
            RoundedButton:
                text: 'Find Device'
                on_release: root.manager.current = 'connection'
            RoundedButton:
                text: 'Support'
                on_release: root.manager.current = 'support'

<SupportScreen>:
    name: 'support'
    BoxLayout:
        AnchorLayout:
            size_hint_x: None
            anchor_x: 'left'
            anchor_y: 'top'
            padding: 20
            RoundedButton:
                size_hint_x: None
                size_hint_y: None
                text: 'back'
                on_press: root.go_back('start')
        ScrollView:
            BoxLayout:
                id: question_box
                padding: 20
                size_hint_y: None
                orientation: 'vertical'

<ConnectionScreen>:
    name: 'connection'
    status: status_label
    wlan: wlan_grid
    RelativeLayout:
        AnchorLayout:
            size_hint_x: None
            anchor_x: 'left'
            anchor_y: 'top'
            padding: 20
            RoundedButton:
                size_hint_x: None
                size_hint_y: None
                text: 'back'
                on_press: root.go_back('start')
        AnchorLayout:
            padding: root.width / 5
            Label:
                id: status_label
            BoxLayout:
                id: wlan_grid
                orientation: 'vertical'
                padding: 40
                spacing: 20
                canvas.before:
                    Color:
                        rgba: app.configuration.config_dict['app']['font_color']
                    Line:
                        width: 0.5
                        rectangle: self.x, self.y, self.width, self.height
                TextInput:
                    id: name_field
                    text: 'Name'
                    multiline: False
                TextInput:
                    id: password_field
                    text: 'Passwort'
                    multiline: False
                RoundedButton:
                    text: 'Senden'
                    on_release: root.send_data(root.ids.name_field.text, root.ids.password_field.text)


<ControlScreen>:
    name: 'control'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            id: top_a
            spacing: 30
            size_hint_y: None
            height: root.height / 6
            RoundedButton:
                id: back_btn
                text: 'back'
                on_press: root.go_back('start')
            Label:
                text: 'Ready for take off'
                color: app.configuration.config_dict['app']['font_color']
            RoundedButton:
                text: 'men√º'
                on_press: root.manager.current = 'settings'
        BoxLayout:
            id: center_a
            orientation: 'vertical'
            Label:
                text: 'CONTROL'
                color: app.configuration.config_dict['app']['font_color']
            BoxLayout:
                id: joystick_a
                orientation: 'horizontal'
        BoxLayout:
            size_hint_y: None
            height: root.height / 6
            Label:
                text: f'H: {root.altitude} \nS: {root.speed}'
                color: app.configuration.config_dict['app']['font_color']
            Label:
                text: f'Lo: {root.latitude} \nLa: {root.longitude}'
                color: app.configuration.config_dict['app']['font_color']
            Label:
                text: f'{root.battery}%'
                color: app.configuration.config_dict['app']['font_color']
            Label:
                text: 'strong'
                color: app.configuration.config_dict['app']['font_color']

<SettingsScreen>:
    name: 'settings'
    BoxLayout:
        orientation: 'vertical'
        RoundedButton:
            text: 'back'
            size_hint_x: None
            size_hint_y: 0.2
            on_release: root.close_menu()
        BoxLayout:
            padding: 50
            orientation: 'vertical'
            BoxLayout:
                Label:
                    text: 'ticks:'
                    color: app.configuration.config_dict['app']['font_color']
                TextInput:
                    id: tick_field
                    multiline: False
        AnchorLayout:
            anchor_x: 'center'
            RoundedButton:
                text: 'speichern'
                on_release: root.save_config()
                size_hint_x: None
                size_hint_y: None

<WaypointsScreen>:
    name: 'waypoints'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'waypoint'
            color: app.configuration.config_dict['app']['font_color']

<DroneRoot>:
    canvas.before:
		Color:
			rgba: app.configuration.config_dict['app']['bg_color']
		Rectangle:
			pos: self.pos
			size: self.size
    BoxLayout:
        orientation: 'vertical'
        MyScreenManager:
            id: sm
            StartScreen
            ConnectionScreen
            ControlScreen
            SettingsScreen
            WaypointsScreen
            SupportScreen
        BoxLayout:
            id: nav_bar
            size_hint_y: None
            height: 0